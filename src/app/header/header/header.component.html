<header
  class="bg-blue-600 dark:bg-gray-800 text-white py-6 shadow-md sticky top-0 z-50"
>
  <div class="container mx-auto flex justify-between items-center px-4">
    <div class="flex items-center space-x-2">
      <a routerLink="/" class="flex items-center space-x-2">
        <mat-icon>sunny</mat-icon>
        <h1 class="text-xl font-bold dark:text-gray-300">WeatherApp</h1>
      </a>
    </div>

    <div class="hidden md:flex items-center space-x-4">
      @if (isLoggedIn$ | async) {
        <a routerLink="/profile" class="flex items-center space-x-2">
          <img
            [src]="'default-avatar.png'"
            alt="User Avatar"
            class="w-10 h-10 rounded-full border border-gray-300"
          />
        </a>
        <a (click)="logout()" class="text-white hover:text-gray-300 cursor-pointer">Logout</a>
      } @else {
        <a routerLink="/login" class="text-white hover:text-gray-300">Login</a>
        <a routerLink="/register" class="text-white hover:text-gray-300">Register</a>
      }
      <button mat-icon-button [matMenuTriggerFor]="themeMenu">
        <mat-icon style="color: white">settings</mat-icon>
      </button>
    </div>
    
  </div>

  <div
    [ngClass]="{
      hidden: !isMobileMenuOpen,
      block: isMobileMenuOpen
    }"
    class="md:hidden bg-blue-700 dark:bg-gray-900 text-white px-4 py-4 space-y-2 text-center transform transition-all duration-300 ease-in-out"
    [style.transform]="isMobileMenuOpen ? 'translateY(0)' : 'translateY(-100%)'"
  >
    <a routerLink="/profile" class="block hover:text-gray-300 py-2">
      Profile
    </a>
    <button mat-icon-button [matMenuTriggerFor]="themeMenu" class="text-white">
      <mat-icon style="color: white">settings</mat-icon>
    </button>
  </div>

  <mat-menu #themeMenu="matMenu">
    <button mat-menu-item (click)="setTheme('light')">
      <mat-icon>brightness_5</mat-icon>
      <span>Light</span>
    </button>
    <button mat-menu-item (click)="setTheme('dark')">
      <mat-icon>brightness_4</mat-icon>
      <span>Dark</span>
    </button>
    <button mat-menu-item (click)="setTheme('system')">
      <mat-icon>settings_suggest</mat-icon>
      <span>System</span>
    </button>
  </mat-menu>
</header>